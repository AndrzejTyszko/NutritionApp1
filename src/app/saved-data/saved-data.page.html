<ion-header>
  <ion-toolbar>
    <ion-title>
      Saved Nutrition Data
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="table-responsive">
    <table class="nutrition-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Date</th>
          <th>Name</th>
          <th>Calories</th>
          <th>Protein (g)</th>
          <th>Carbohydrates (g)</th>
          <th>Fat (g)</th>
          <th>Sugar (g)</th>
          <th>Fiber (g)</th>
          <th>Sodium (mg)</th>
          <th>Potassium (mg)</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let entry of savedData; let i = index">
          <tr class="date-section">
            <td colspan="11">{{ entry.date }}</td>
          </tr>
          <tr *ngFor="let item of entry.items; let j = index">
            <td>{{ j + 1 }}</td>
            <td></td>
            <td>{{ item.name }}</td>
            <td>{{ item.calories | number: '1.0-0' }}</td>
            <td>{{ item.protein_g | number: '1.0-1' }}</td>
            <td>{{ item.carbohydrates_total_g | number: '1.0-1' }}</td>
            <td>{{ item.fat_total_g | number: '1.0-1' }}</td>
            <td>{{ item.sugar_g | number: '1.0-1' }}</td>
            <td>{{ item.fiber_g | number: '1.0-1' }}</td>
            <td>{{ item.sodium_mg | number: '1.0-0' }}</td>
            <td>{{ item.potassium_mg | number: '1.0-0' }}</td>
          </tr>
        </ng-container>
      </tbody>
      <tfoot>
        <tr>
          <th>Total</th>
          <th></th>
          <th></th>
          <th>{{ getTotal('calories') | number: '1.0-0' }}</th>
          <th>{{ getTotal('protein_g') | number: '1.0-1' }}</th>
          <th>{{ getTotal('carbohydrates_total_g') | number: '1.0-1' }}</th>
          <th>{{ getTotal('fat_total_g') | number: '1.0-1' }}</th>
          <th>{{ getTotal('sugar_g') | number: '1.0-1' }}</th>
          <th>{{ getTotal('fiber_g') | number: '1.0-1' }}</th>
          <th>{{ getTotal('sodium_mg') | number: '1.0-0' }}</th>
          <th>{{ getTotal('potassium_mg') | number: '1.0-0' }}</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <ion-button expand="full" (click)="goBack()">Back to Nutrition Info</ion-button>
</ion-content>

<style>
  .table-responsive {
    overflow-x: auto;
  }

  .nutrition-table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Arial', sans-serif;
  }

    .nutrition-table th, .nutrition-table td {
      border: 1px solid #ccc;
      padding: 12px;
      text-align: center;
    }

    .nutrition-table th {
      background: linear-gradient(45deg, #4CAF50, #8BC34A);
      color: #fff;
      font-weight: bold;
    }

    .nutrition-table td {
      color: #000;
    }

    .nutrition-table .date-section {
      background: linear-gradient(45deg, #FFC107, #FF9800);
      color: #fff;
      font-weight: bold;
    }

    .nutrition-table tbody tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .nutrition-table tbody tr:nth-child(odd) {
      background-color: #fff;
    }

    .nutrition-table tfoot th {
      background: linear-gradient(45deg, #2196F3, #03A9F4);
      color: #fff;
      font-weight: bold;
    }

  ion-button {
    margin-top: 20px;
    --background: linear-gradient(45deg, #3F51B5, #2196F3);
    --color: #fff;
    --border-radius: 20px;
    --padding: 10px 20px;
    --font-size: 1.1em;
  }

    ion-button:hover {
      --background: linear-gradient(45deg, #303F9F, #1976D2);
    }
</style>
